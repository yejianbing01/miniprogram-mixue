<view class="page">
  <view class="header-section">
    <van-tabs active="{{ active }}" bind:change="onChange">
      <van-tab title="附近门店"></van-tab>
      <van-tab title="常用门店"></van-tab>
    </van-tabs>
    <van-search custom-class="search" bind:tap="goToChooseLocation" shape="round" value="{{ value }}" placeholder="搜索门店" />
  </view>
  <view class="map-section">
    <map class="map" show-location markers="{{ markers }}" latitude="{{ currentLocation.latitude }}" longitude="{{ currentLocation.longitude }}"></map>
    <view class="toggle-map">
      收起地图
      <van-icon class="icon" name="arrow-up" />
    </view>
  </view>
  <view class="store-card-section">
    <view class="store-card" wx:for="{{ storeList }}" wx:key="index">
      <view class="store-card__meta">
        <view class="name">{{ item.name }}</view>
        <view class="address">{{ item.address }}</view>
        <view class="opening-time">营业时间: {{ item.openingTime.start }} - {{ item.openingTime.end }}</view>
        <van-tag type="primary">{{ storeStatusDict[item.status] }}</van-tag>
      </view>
      <view class="store-card__actions">
        <view class="distance">距离{{ item.distance }}km</view>
        <view class="actions">
          <van-icon custom-class="action" name="location" />
          <van-icon custom-class="action" name="phone" />
        </view>
      </view>
    </view>
    <van-loading custom-class="loading" type="spinner" vertical>加载中...</van-loading>
  </view>
</view>